<div class="center">
  <h1>Acordar forma de pago</h1>
</div>

<div class="">
  <form>
    <h2> Consultar cotizacion </h2>
    <input [(ngModel)]="documentoCliente" name="cedula" class="txt" placeholder="Digite el documento del cliente" style="width:70%">
    <input (click)="consultarCotizaciones()" class="btn" type="submit" value="Consultar Cotizaciones" style="display:inline">
  </form>
</div>

<div *ngIf="cotizaciones.length>0">
  <form>
    <h2> Seleccionar cotizacion </h2>
    <select [(ngModel)]="cotizacion" (ngModelChange)="cargarCotizacion($event)" name="auto" class="txt" style="width:70%">
      <option *ngFor="let cotizacion of cotizaciones" value="{{cotizacion.IDCOTIZACION}}">Cotizacion {{cotizacion.IDCOTIZACION}} de {{cotizacion.FECHACOTIZACION | date: "dd/MM/yyyy" }} por valor de {{cotizacion.TOTALCOTIZACION}}</option>
    </select>
  </form>
</div>

<div *ngIf="mostarDetalles">
  <h2> Informaci√≥n de la cotizacion </h2>

  <h3> Estado: {{dataCotizacion.ESTADO}}</h3>
  <h3> Fecha: {{dataCotizacion.FECHA | date: "dd/MM/yyyy"}}</h3>
  <h3> Total: {{dataCotizacion.TOTAL}}</h3>

  <h2> Detalles de la cotizacion </h2>

  <table style="width:100%; text-align:left">
    <tr>
      <th>TIPO ITEM </th>
      <th>ITEM </th>
      <th>PRECIO </th>
    </tr>
    <tr *ngFor="let detalle of detallesCotizacion">
      <th> {{detalle.DESCCOTIZACION}} </th>
      <th> {{detalle.NOMBREDETALLE}}</th>
      <th> {{detalle.VALORELEMENTO}}</th>
    </tr>
    <tr>
      <th>TOTAL COTIZACION</th>
      <th> </th>
      <th>{{dataCotizacion.TOTAL}} </th>
    </tr>
  </table>
</div>

<div *ngIf="mostarDetalles">

    <h2> Acordar forma de pago 30%</h2>

    <h3> Porcentaje total acordado {{total30}}% </h3> 

    <table style="width:100%; text-align:left" *ngIf="acuerdo30.length>0">
        <tr>
          <th> MODALIDAD </th>
          <th> BANCO </th>
          <th> PORCENTAJE </th>
          <th> VALOR </th>
        </tr>
        <tr *ngFor="let pago of acuerdo30">
          <th> {{pago.modalidad}} </th>
          <th> {{pago.nombreBanco}} </th>
          <th> {{pago.porcentaje}}</th>
          <th> {{pago.valor}}</th>
          <th> <input (click)="eliminar30(pago.indice)" class="btn" type="submit" value="Eliminar"> </th>
        </tr>
      </table>


    <form>
        <h2> Agregar pago 30 </h2>
        <input [(ngModel)]="porcentaje30" name="porcentaje3" type="number" class="txt" placeholder="Escriba el porcentaje" style="width:70%">
        <select [(ngModel)]="modalidad30" name="modalidad3" class="txt" style="width:70%">
          <option *ngFor="let modalidad of modalidadesPago" value="{{modalidad.IDMODALIDAD}}">{{modalidad.NOMBREMODALIDAD}}</option>
        </select>
        <select *ngIf="modalidad30==1" [(ngModel)]="banco30" name="banco" class="txt" style="width:70%" >
            <option *ngFor="let banco of bancos" value="{{banco.IDBANCO}}">{{banco.NOMBREBANCO}}</option>
        </select>
        <input (click)="agregar30()" class="btn" type="submit" value="Agregar forma de pago">
    </form>

  
    <h2> Acordar forma de pago 70%</h2>

    <h3> Porcentaje total acordado {{total70}}% </h3> 

    <table style="width:100%; text-align:left" *ngIf="acuerdo70.length>0">
        <tr>
          <th> MODALIDAD </th>
          <th> BANCO </th>
          <th> PORCENTAJE </th>
          <th> VALOR </th>
        </tr>
        <tr *ngFor="let pago of acuerdo70">
          <th> {{pago.modalidad}} </th>
          <th> {{pago.nombreBanco}} </th>
          <th> {{pago.porcentaje}}</th>
          <th> {{pago.valor}}</th>
          <th> <input (click)="eliminar70(pago.indice)" class="btn" type="submit" value="Eliminar"> </th>
        </tr>
      </table>


    <form>
        <h2> Agregar forma de pago 70 </h2>
        <input [(ngModel)]="porcentaje70" name="porcentaje7" type="number" class="txt" placeholder="Escriba el porcentaje" style="width:70%">
        <select [(ngModel)]="modalidad70" name="modalidad7" class="txt" style="width:70%">
          <option *ngFor="let modalidad of modalidadesPago" value="{{modalidad.IDMODALIDAD}}">{{modalidad.NOMBREMODALIDAD}}</option>
        </select>
        <select *ngIf="modalidad70==1" [(ngModel)]="banco70" name="banco" class="txt" style="width:70%" >
            <option *ngFor="let banco of bancos" value="{{banco.IDBANCO}}">{{banco.NOMBREBANCO}}</option>
        </select>
        <input (click)="agregar70()" class="btn" type="submit" value="Agregar forma de pago">
    </form>


</div>

<div class="center" *ngIf="mostarDetalles">
    <input (click)="agregarAcuerdo()" class="btn" type="submit" value="Registrar acuerdo de pago">
</div>